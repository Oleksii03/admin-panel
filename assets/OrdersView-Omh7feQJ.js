import{u as R}from"./root-D-fZ8HUh.js";import{d as w,c as x,u as T,a as b,n as U,b as C,i as W,e,f as F,t as m,g as r,w as y,r as v,h as N,j as P,o as u,_ as k,k as S,F as L,l as H,m as O,p as K,T as j,q as z,s as G,v as Y,x as J,y as Q}from"./index-Bl4SnBp0.js";function X(){function o(i){return i.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function s(i,n,a="after"){const l=o(i);return a==="before"?`${n}${l}`:`${l} ${n}`}function t(i,n=0){return i.toFixed(n).replace(/\B(?=(\d{3})+(?!\d))/g," ")}return{formatWithSpaces:o,formatCurrency:s,formatWithDecimals:t}}const Z={class:"order-item__title"},tt={class:"order-item__quantity-box quantity-box"},et={class:"quantity-box__icon"},ot={class:"quantity-box__quantity"},rt={class:"quantity-box__number"},st={class:"order-item__date"},nt={class:"order-item__date-short"},it={class:"order-item__date-full"},lt={class:"order-item__price"},dt={class:"order-item__price-usd"},at={class:"order-item__price-uah"},ct={key:0,class:"order-item__active-mark"},ut=w({__name:"OrderItem",props:{order:{},isActiveOrder:{type:Boolean}},emits:["get-active-order","get-deletion-order-data"],setup(o){const s=o,t=W("openProductList"),{formatDateFull:i,formatDateNumbers:n}=T(),{formatWithSpaces:a}=X(),l=x(()=>i(s.order.date)),d=x(()=>n(s.order.date)),f=x(()=>{let g=0,_=0;return s.order.products?.forEach(p=>{const c=p.price?.find($=>$.symbol==="UAH"),A=p.price?.find($=>$.symbol==="USD");g+=c?.value??0,_+=A?.value??0}),{totalUAH:a(g),totalUSD:a(_)}});return(g,_)=>{const p=v("Operation"),c=v("el-icon"),A=v("ArrowRightBold"),$=v("DeleteFilled");return u(),b("li",{class:U(["order-item",{"order-item_open":C(t)}]),onClick:_[1]||(_[1]=h=>g.$emit("get-active-order",o.order))},[e("p",Z,m(o.order.title),1),e("div",tt,[e("span",et,[r(c,null,{default:y(()=>[r(p)]),_:1})]),e("div",ot,[e("p",rt,m(o.order.products?.length??0),1),_[2]||(_[2]=e("p",{class:"quantity-box__title"},"Продукта",-1))])]),e("div",st,[e("p",nt,m(d.value),1),e("p",it,m(l.value),1)]),e("div",lt,[e("p",dt,m(f.value.totalUSD)+" $",1),e("p",at,[N(m(f.value.totalUAH)+" ",1),_[3]||(_[3]=e("span",null,"UAH",-1))])]),o.isActiveOrder&&C(t)?(u(),b("div",ct,[r(c,null,{default:y(()=>[r(A)]),_:1})])):F("",!0),e("button",{class:U(["order-item__delete-btn",{"order-item__delete-btn_hidden":C(t)}]),onClick:_[0]||(_[0]=P(h=>g.$emit("get-deletion-order-data",{orderId:o.order.id,amount:o.order.products?.length??0,totalUSD:f.value.totalUSD,totalUAH:f.value.totalUAH}),["stop"]))},[r(c,null,{default:y(()=>[r($)]),_:1})],2)],2)}}}),_t=k(ut,[["__scopeId","data-v-327f5ae1"]]),pt={class:"order-list"},mt=w({__name:"OrderList",props:{orders:{}},emits:["get-active-order","get-deletion-order-data"],setup(o,{emit:s}){const t=s,i=S(0);function n(a){i.value=a.id,t("get-active-order",a)}return(a,l)=>(u(),b("ul",pt,[(u(!0),b(L,null,H(o.orders,d=>(u(),O(_t,{onGetActiveOrder:l[0]||(l[0]=f=>n(f)),onGetDeletionOrderData:l[1]||(l[1]=f=>t("get-deletion-order-data",f)),key:d.id,order:d,"is-active-order":d.id===i.value},null,8,["order","is-active-order"]))),128))]))}}),ft={class:"products-item__img-wrapper"},vt=["src","alt"],ht={class:"products-item__info"},yt={class:"products-item__info-title"},bt={class:"products-item__info-sn"},gt=w({__name:"ProductsItem",props:{product:{}},emits:["delete-product"],setup(o){return(s,t)=>{const i=v("DeleteFilled"),n=v("el-icon");return u(),b("li",{class:U(["products-item",{new:o.product.isNew}])},[t[1]||(t[1]=e("div",{class:"products-item__active"},null,-1)),e("div",ft,[e("img",{class:"products-item__img",src:o.product.photo,alt:o.product.title},null,8,vt)]),e("div",ht,[e("p",yt,[N(m(o.product.title)+" / ",1),e("span",null,m(o.product.specification),1)]),e("p",bt," SN - "+m(o.product.serialNumber),1)]),t[2]||(t[2]=e("p",{class:"products-item__status"},"Свободен",-1)),e("button",{class:"products-item__delete-btn",onClick:t[0]||(t[0]=P(a=>s.$emit("delete-product",o.product.id),["stop"]))},[r(n,null,{default:y(()=>[r(i)]),_:1})])],2)}}}),$t=k(gt,[["__scopeId","data-v-48265788"]]),wt={class:"products"},xt={class:"products__header"},Ct={class:"products__title"},Dt={class:"products__add-product"},St={class:"products__list"},Ot=w({__name:"ProductsList",props:{products:{},title:{}},setup(o){return(s,t)=>{const i=v("Close"),n=v("el-icon"),a=v("Plus");return u(),b("div",wt,[e("button",{onClick:t[0]||(t[0]=l=>s.$emit("close-active-order")),class:"products__close-btn",type:"button"},[r(n,null,{default:y(()=>[r(i)]),_:1})]),e("div",xt,[e("h2",Ct,m(o.title),1),e("div",Dt,[r(n,null,{default:y(()=>[r(a)]),_:1}),t[2]||(t[2]=e("p",{class:"products__add-product-title"},"Добавить продукт",-1))])]),e("ul",St,[(u(!0),b(L,null,H(o.products,l=>(u(),O($t,{onDeleteProduct:t[1]||(t[1]=d=>s.$emit("delete-product",d)),key:l.id,product:l},null,8,["product"]))),128))])])}}}),kt=k(Ot,[["__scopeId","data-v-6cdd5da6"]]);var q=(function(){return Math.random().toString(36).substring(2)}),At=w({name:"ContentLoader",props:{width:{type:[Number,String]},height:{type:[Number,String]},viewBox:{type:String},preserveAspectRatio:{type:String,default:"xMidYMid meet"},speed:{type:Number,default:2},baseUrl:{type:String,default:""},primaryColor:{type:String,default:"#f9f9f9"},secondaryColor:{type:String,default:"#ecebeb"},primaryOpacity:{type:Number,default:1},secondaryOpacity:{type:Number,default:1},uniqueKey:{type:String},animate:{type:Boolean,default:!0}},setup:function(s){var t=x(function(){return s.uniqueKey?"".concat(s.uniqueKey,"-idClip"):q()}),i=x(function(){return s.uniqueKey?"".concat(s.uniqueKey,"-idGradient"):q()}),n=x(function(){var d;return(d=s.width)!==null&&d!==void 0?d:400}),a=x(function(){var d;return(d=s.height)!==null&&d!==void 0?d:130}),l=x(function(){var d;return(d=s.viewBox)!==null&&d!==void 0?d:"0 0 ".concat(n.value," ").concat(a.value)});return{idClip:t,idGradient:i,computedViewBox:l}},render:function(){return r("svg",{width:this.width,height:this.height,viewBox:this.computedViewBox,version:"1.1",preserveAspectRatio:this.preserveAspectRatio},[r("rect",{style:{fill:"url(".concat(this.baseUrl,"#").concat(this.idGradient,")")},"clip-path":"url(".concat(this.baseUrl,"#").concat(this.idClip,")"),x:"0",y:"0",width:"100%",height:"100%"},null),r("defs",null,[r("clipPath",{id:this.idClip},[this.$slots.default?this.$slots.default():r("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"100%",height:"100%"},null)]),r("linearGradient",{id:this.idGradient},[r("stop",{offset:"0%","stop-color":this.primaryColor,"stop-opacity":this.primaryOpacity},[this.animate?r("animate",{attributeName:"offset",values:"-2; 1",dur:"".concat(this.speed,"s"),repeatCount:"indefinite"},null):null]),r("stop",{offset:"50%","stop-color":this.secondaryColor,"stop-opacity":this.secondaryOpacity},[this.animate?r("animate",{attributeName:"offset",values:"-1.5; 1.5",dur:"".concat(this.speed,"s"),repeatCount:"indefinite"},null):null]),r("stop",{offset:"100%","stop-color":this.primaryColor,"stop-opacity":this.primaryOpacity},[this.animate?r("animate",{attributeName:"offset",values:"-1; 2",dur:"".concat(this.speed,"s"),repeatCount:"indefinite"},null):null])])])])}});const Ut=w({__name:"OrderListSkeleton",setup(o){return(s,t)=>(u(),O(C(At),{viewBox:"0 0 1730 385",speed:2,primaryColor:"rgb(255, 255, 255)",secondaryColor:"#ecebeb"},{default:y(()=>[...t[0]||(t[0]=[e("rect",{x:"5",y:"0",rx:"5",ry:"5",width:"1720",height:"65"},null,-1),e("rect",{x:"5",y:"80",rx:"5",ry:"5",width:"1720",height:"65"},null,-1),e("rect",{x:"5",y:"160",rx:"5",ry:"5",width:"1720",height:"65"},null,-1),e("rect",{x:"5",y:"240",rx:"5",ry:"5",width:"1720",height:"65"},null,-1),e("rect",{x:"5",y:"320",rx:"5",ry:"5",width:"1720",height:"65"},null,-1)])]),_:1}))}}),Nt=w({__name:"BackdropView",props:{isVisible:{type:Boolean}},emits:["close"],setup(o){return(s,t)=>(u(),O(j,{to:"main"},[e("div",{class:U(["backdrop",{visible:o.isVisible}]),onClick:t[0]||(t[0]=P(i=>s.$emit("close"),["self"]))},[K(s.$slots,"default",{},void 0,!0)],2)]))}}),Bt=k(Nt,[["__scopeId","data-v-2fe7e0a2"]]);var B={exports:{}},I;function Pt(){return I||(I=1,(function(o){(function(s){var t=!1,i,n;function a(){if(typeof i<"u")return i;var p=document.documentElement,c=document.createElement("div");return c.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),p.appendChild(c),i=c.offsetWidth-c.clientWidth,p.removeChild(c),i}function l(){return document.documentElement.scrollHeight>window.innerHeight}function d(p){if(!(typeof document>"u"||t)){var c=document.documentElement;n=window.pageYOffset,l()?c.style.width="calc(100% - "+a()+"px)":c.style.width="100%",c.style.position="fixed",c.style.top=-n+"px",c.style.overflow="hidden",t=!0}}function f(){if(!(typeof document>"u"||!t)){var p=document.documentElement;p.style.width="",p.style.position="",p.style.top="",p.style.overflow="",window.scroll(0,n),t=!1}}function g(){if(t){f();return}d()}var _={on:d,off:f,toggle:g};o.exports=_})()})(B)),B.exports}var qt=Pt();const V=z(qt),It={class:"modal"},Vt={class:"modal__content"},Ft={class:"modal__body"},Lt={class:"modal__body-title"},Ht={class:"modal__body-usd"},Gt={class:"modal__body-amount"},Et={class:"modal__body-uah"},Mt={class:"modal__footer"},Rt=w({__name:"ConfirmModal",props:{orderData:{}},emits:["close","delete"],setup(o){return G(()=>V.on()),Y(()=>V.off()),(s,t)=>{const i=v("Close"),n=v("el-icon"),a=v("DeleteFilled");return u(),b("div",It,[e("button",{onClick:t[0]||(t[0]=l=>s.$emit("close")),class:"modal__close-btn",type:"button"},[r(n,null,{default:y(()=>[r(i)]),_:1})]),e("div",Vt,[t[4]||(t[4]=e("h3",{class:"modal__title"},"Ви уверены, что хотите удалить этот приход?",-1)),e("div",Ft,[e("p",Lt,"Приход: "+m(o.orderData?.orderId),1),e("p",Ht,"Сумма заказа USD: "+m(o.orderData?.totalUSD),1),e("p",Gt,"Количество товаров: "+m(o.orderData?.amount),1),e("p",Et,"Сумма заказа UAH: "+m(o.orderData?.totalUAH),1)]),e("div",Mt,[e("button",{onClick:t[1]||(t[1]=l=>s.$emit("close")),class:"modal__footer-btn modal__footer-btn_cancel",type:"button"}," Отменить "),e("button",{onClick:t[2]||(t[2]=l=>o.orderData&&s.$emit("delete",o.orderData.orderId)),class:"modal__footer-btn modal__footer-btn_delete",type:"button"},[r(n,null,{default:y(()=>[r(a)]),_:1}),t[3]||(t[3]=N(" Удалить ",-1))])])])])}}}),Tt=k(Rt,[["__scopeId","data-v-5ed54898"]]),Wt={class:"orders"},Kt={class:"orders__container container"},jt={class:"orders__title-box"},zt={class:"orders__title"},Yt=w({__name:"OrdersView",setup(o){const s=R(),{orders:t,isLoading:i}=J(s),n=S([]),a=S(""),l=S(!1),d=S(!1),f=S(null);function g(h){n.value=h.products,a.value=h.title,l.value=!0}function _(){n.value=[],a.value="",l.value=!1}function p(h){n.value=n.value.filter(D=>D.id!==h)}function c(h){f.value=h,d.value=!0}function A(h){t.value=t.value.filter(D=>D.id!==h),setTimeout(()=>$(),200)}const $=()=>d.value=!1;return Q("openProductList",l),G(async()=>await s.getOrders()),(h,D)=>{const E=v("Plus"),M=v("el-icon");return u(),b("section",Wt,[e("div",Kt,[e("div",jt,[r(M,null,{default:y(()=>[r(E)]),_:1}),e("h1",zt,[D[0]||(D[0]=N(" Приходы / ",-1)),e("span",null,m(C(t).length),1)])]),r(Bt,{onClose:$,"is-visible":d.value},{default:y(()=>[r(Tt,{"order-data":f.value,onClose:$,onDelete:A},null,8,["order-data"])]),_:1},8,["is-visible"]),C(i)?(u(),O(Ut,{key:0})):(u(),b("div",{key:1,class:U(["orders__list-wrapper",{"orders__list-wrapper_open":l.value}])},[r(mt,{orders:C(t),onGetActiveOrder:g,onGetDeletionOrderData:c},null,8,["orders"]),l.value?(u(),O(kt,{key:0,onCloseActiveOrder:_,onDeleteProduct:p,products:n.value,title:a.value},null,8,["products","title"])):F("",!0)],2))])])}}}),Xt=k(Yt,[["__scopeId","data-v-31349737"]]);export{Xt as default};
